# HttpSession이란?

* HttpSession은 서버가 클라이언트(브라우저)별로 정보를 유지하기 위한 저장소
* 브라우저가 로그인 요청을 보내면 서버는 HttpSession을 생성하거나 기존 세션을 재사용해서 정보를 저장함
* 이 세션은 클라이언트가 로그아웃하거나 세션이 만료되기 전까지 유지됨
* 서버 메모리에 저장됨
* 클라이언트는 세션을 식별하기 위해 JSESSIONID 쿠키를 서버로부터 받아 브라우저에 저장함

## 동작과정
* 클라이언트 → 서버: 로그인 정보를 담은 POST 요청 전송
* 컨트롤러 실행
* 서비스 실행
* 서버는 클라이언트에게 LoginResponse와 함께 JSESSIONID 쿠키를 내려줌
* 클라이언트는 이후 요청부터 JSESSIONID=ABC123XYZ 쿠키를 포함하여 서버에 전송
* 서버는 이 JSESSIONID를 이용해서 세션을 식별하고, 그 세션에 있는 userId 값을 사용
* session.setAttribute("userId", member.getId()) 이 구문이 로그인 정보(사용자 ID)를 세션에 저장하는 것
* 클라이언트가 로그인 성공 후 받는 JSESSIONID 쿠키는 서버의 이 세션 객체와 매핑됨
* 로그인 이후 사용자는 JSESSIONID를 통해 세션에 접근하고, 서버는 그 세션에 저장된 정보를 바탕으로 로그인 상태를 유지함
* 클라이언트가 쿠키에 JSESSIONID를 넣어 요청하면, 서버는 해당 세션을 찾고, 그 안에 저장된 userId로 사용자를 식별
* 핵심은 서버에서 session.setAttribute("userId", member.getId()); 로 서버 세션에 로그인 상태 정보를 저장하지만, 이 세션 객체 자체를 클라이언트에 직접 보내는 게 아니라, 클라이언트와 서버가 세션 ID(cookie) 로 상태를 관리한다는 점
* 로그인 시 서버에서 세션 생성 & 세션 ID 발급함
* session.setAttribute("userId", member.getId());는 서버 측 메모리(또는 분산 세션 저장소)에 로그인 정보를 저장하는 것이고,
* 이때 클라이언트에게는 서버가 자동으로 생성한 세션 ID가 담긴 쿠키(JSESSIONID 등)를 HTTP 응답 헤더에 실어서 전달함
* 클라이언트가 쿠키를 저장하고, 이후 요청마다 자동으로 전송
* 클라이언트(브라우저)는 이 쿠키를 저장했다가, 다음부터 서버에 요청할 때마다 쿠키를 같이 보냄
* 서버는 들어오는 요청의 쿠키 세션 ID로 세션을 조회
* 서버는 요청에 담긴 세션 ID 쿠키를 보고 해당 세션에 저장된 "userId" 값을 꺼내서 로그인 상태를 확인함