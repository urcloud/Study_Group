## 1. 도커란?
- 컨테이너 기반 플랫폼: 애플리케이션을 경량 단위(컨테이너)로 실행.
- 컨테이너: 가상 머신처럼 독립적이지만 경량이며, PaaS 수준의 효율성을 제공.
- 코드 수정 없이 다양한 환경에서 이식성 보장.

## 2. 클라우드 환경에서 도커
- 클라우드 이주: 서버, 스토리지, 네트워크를 클라우드 제공자에게 맡기고 사용량 기반 비용 부담.
- 기존 방식:
  - IaaS: 가상 머신에서 애플리케이션 실행, 클라우드 종속성 낮지만 운영비 ↑
  - PaaS: 클라우드 매니지드 서비스 사용, 클라우드 종속성 ↑, 운영비 ↓
- 도커 활용:
  - 애플리케이션 컴포넌트를 컨테이너로 패키징 → 쿠버네티스나 도커 클러스터에서 실행 가능.
  - 클라우드/로컬 환경 불문 운영비 절감 + 높은 이식성 확보.
- 도커화 비용: 설치 절차 Dockerfile 재작성, 배포 스크립트(docker-compose, K8s 매니페스트) 작성 필요.

## 3. 레거시 애플리케이션 현대화
- 모놀리식 앱도 컨테이너에서 실행 가능하지만 배포 기민성 제한.
- 도커로 통짜 앱 → 단일 컨테이너 → 기능별 컨테이너로 분리 가능.
- 장점:
  - 개별 기능 컨테이너만 수정 가능 → 빠른 테스트 및 배포
  - 기능별 독립적 기술 스택 적용 가능

## 4. 클라우드 네이티브 & 새 앱 개발
- 클라우드 네이티브: 마이크로서비스 아키텍처 + 컨테이너 기반 + 동적 오케스트레이션.
- 도커를 활용하면:
  - 기존 앱 분할 및 이식 가능
  - 새 앱 개발 시 빠른 개발 가능
  - 서드파티 컨테이너(Docker Hub) 활용 가능

## 5. 서버리스(Serverless)
- 도커로 운영 환경 일관성 유지 가능
- 서버리스: 함수 단위 배포 → 플랫폼이 빌드/패키징/실행 담당
- 대부분 컨테이너/경량 가상화(Firecracker) 활용
- 오픈소스 서버리스 프레임워크: Knative, OpenFaaS

## 6. 데브옵스(DevOps) 도입
- 컨테이너 기반으로 개발·운영팀 기술 통일 가능
- Dockerfile & 도커 컴포즈 → 일관된 배포, 효율적 운영
- 소규모 일일 배포 가능 → 릴리스 주기 단축

## 7. 도커 설치 확인
- Docker Desktop 설치 후 확인
```bash
docker version
docker-compose version
```

## 8. 컨테이너로 Hello World 실행
- 명령어
```powershell
docker container run diamol/ch02-hello-diamol
```
- 동작과정
    1. 로컬에 이미지가 없으면 자동으로 pull 진행
    2. 이미지 다운로드 후 컨테이너 실행
    3. 애플리케이션 출력: 메시지, 호스트명, OS, IP 주소
- 핵심: 도커 이미지를 통해 어디서든 동일한 환경에서 애플리케이션 실행 가능

## 9. 도커 워크플로우
1. 빌드(Build): 애플리케이션을 이미지로 패키징
2. 공유(Share): 패키지를 다른 사용자와 공유
3. 실행(Run): 컨테이너로 애플리케이션 실행
- 컨테이너의 장점: 이식성, 격리, 효율성

## 10. 컨테이너란?
- 정의: 애플리케이션 + 실행 환경(IP, 호스트명, 파일 시스템 등)을 포함한 격리된 상자
- 특징: 
    - 서로 독립된 환경 제공 (격리)
    - 호스트 OS, CPU, 메모리를 공유 (밀집)

- 가상 머신(VM)과 비교

| 항목     | 컨테이너 | VM |
| ------ | ---- | -- |
| OS     | 공유   | 독립 |
| 리소스 효율 | 높음   | 낮음 |
| 실행 속도  | 빠름   | 느림 |
| 밀집 가능  | 높음   | 낮음 |
| 격리 수준  | 충분   | 충분 |

## 11. 컨테이너 활용
- 스크립트와 필요한 도구를 이미지로 패키징 → 설치 없이 실행 가능
- 대화식 컨테이너 실행
```bash
docker container run --interactive --tty diamol/base
```
- --interactive: 터미널 접속
- --tty: 터미널 세션 제공
- 컨테이너 내부 명령어 예
```bash
/ # hostname
/ # date
```

## 12. 컨테이너 관리
- 실행 중 컨테이너 확인
```bash
docker container ls
```
- 프로세스 확인
```bash
docker container top <컨테이너ID>
```
- 로그 확인
```bash
docker container logs <컨테이너ID>
```
- 상세 정보 확인
```bash
docker container inspect <컨테이너ID>
```

## 13. 웹사이트 호스팅
- 백그라운드에서 실행
```bash
docker container run --detach --publish 8088:80 diamol/ch02-hello-diamol-web
```
- --detach: 백그라운드 실행
- --publish: 호스트 포트와 컨테이너 포트 연결
- 실행 상태 확인
```bash
docker container ls
```
- 리소스 실시간 확인
```bash
docker container stats <컨테이너ID>
```
- 모든 컨테이너 삭제
```bash
docker container rm --force $(docker container ls --all --quiet)
```

## 14. 도커 동작 원리
- 도커 엔진: 백그라운드에서 컨테이너/이미지 관리, 로컬 이미지 캐시, 가상 네트워크 생성
- 도커 CLI: 도커 API를 호출하는 클라이언트
- containerd: 실제 컨테이너 관리, 호스트 OS 기능 활용
- 장점
    - 어디서나 동일한 환경 제공
    - 격리 + 밀집 동시 달성
    - 빠른 실행과 리소스 효율


+ 이미지 vs 컨테이너 구분해오기